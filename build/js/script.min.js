const body=document.querySelector("body"),headerMenu=body.querySelector(".header__menu"),modalNav=body.querySelector(".modal"),modalClose=body.querySelector(".modal__close"),modalLinks=body.querySelectorAll(".modal__link"),sliderButtons=body.querySelectorAll(".header__slider-button"),sliderItems=body.querySelectorAll(".header__item-img"),reviewsButtons=body.querySelectorAll(".reviews__slider-button"),reviewsItems=body.querySelectorAll(".reviews__item"),contactsForm=body.querySelector(".contacts__form"),inputName=contactsForm.querySelector(".contacts__input--name"),inputPhone=contactsForm.querySelector(".contacts__input--phone"),inputMail=contactsForm.querySelector(".contacts__input--mail"),fields=contactsForm.querySelectorAll(".contacts__input"),getTemplateContent=(e,t)=>e.querySelector(`#${t}`).content.querySelector(`.${t}`),success=getTemplateContent(body,"alert__success"),errorLoading=getTemplateContent(body,"alert__error-loading"),dataSabmitUrl="https://echo.htmlacademy.ru/",onAddModalNav=()=>modalNav.classList.add("show"),onremoveModalNav=()=>modalNav.classList.remove("show"),successElement=success.cloneNode(!0),successErrorLoading=errorLoading.cloneNode(!0),resetForm=()=>{inputName.value="",inputPhone.value="",inputMail.value=""},onChangInput=e=>{if(!inputName.value||!inputPhone.value||!inputMail.value){e.preventDefault();for(let e=0;e<fields.length;e++){let t=fields[e];t.value||t.classList.add("error")}}},switchSlides=(e,t)=>{for(let o=0;o<e.length;o++)e[o].onclick=()=>{for(let o=0;o<e.length;o++)e[o].classList.remove("button-active"),t[o].classList.remove("active");e[o].classList.add("button-active"),t[o].classList.add("active")}};switchSlides(sliderButtons,sliderItems),$((()=>{$(".slide-one").owlCarousel({loop:!0,margin:17,center:!0,nav:!1,pagination:!1,touchDrag:!0,responsive:{0:{items:1.2},320:{items:1.2},768:{items:1.2,margin:40},1360:{margin:20,items:1.65}}})}));const servicesButtons=document.querySelectorAll(".services__item-control"),servicesItems=document.querySelectorAll(".services__item");switchSlides(servicesButtons,servicesItems);const isEscEvent=e=>e.key===keys.escape||e.key===keys.esc,onSuccessRemove=()=>{successElement.remove(),document.removeEventListener("click",onSuccessRemove)},onElementEscRemove=()=>{isEscEvent&&(onSuccessRemove(),document.removeEventListener("keydown",onElementEscRemove))},alertSuccess=()=>{body.append(successElement),document.addEventListener("keydown",onElementEscRemove),document.addEventListener("click",onSuccessRemove)},onErrorRemove=()=>{successErrorLoading.remove(),document.removeEventListener("click",onErrorRemove)},onErrorEscRemove=()=>{isEscEvent&&(onErrorRemove(),document.removeEventListener("keydown",onErrorEscRemove))},alertError=()=>{body.append(successErrorLoading),document.addEventListener("keydown",onErrorEscRemove),document.addEventListener("click",onErrorRemove)},sendData=(e,t,o,n)=>{fetch(e,{method:"POST",body:t}).then((e=>{e.ok?o():n()})).catch((()=>{n()}))},alertForm=()=>{body.append(successElement),document.addEventListener("keydown",onElementEscRemove),document.addEventListener("click",onSuccessRemove),inputName.value="",inputPhone.value="",inputMail.value=""},onFormSend=e=>{e.preventDefault(),onChangInput();const t=new FormData(e.target);var o,n;o=alertForm,n=alertError,fetch(dataSabmitUrl,{method:"POST",body:t}).then((e=>{e.ok?o():n()})).catch((()=>{n()}))};switchSlides(reviewsButtons,reviewsItems),headerMenu.addEventListener("click",onAddModalNav),modalClose.addEventListener("click",onremoveModalNav);for(let e=0;e<modalLinks.length;e++)modalLinks[e].addEventListener("click",onremoveModalNav);contactsForm.addEventListener("submit",onFormSend);